<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BookStore - Your Online Book Shop</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-logo">
                    <i class="fas fa-book"></i>
                    <span>BookStore</span>
                </div>
                <div class="nav-menu">
                    <a href="/" class="nav-link active">Home</a>
                    <a href="#books" class="nav-link">Books</a>
                    <a href="#about" class="nav-link">About</a>
                    <a href="#contact" class="nav-link">Contact</a>
                </div>
                <div class="nav-auth">
                    <% if (typeof user !== 'undefined' && user) { %>
                        <span class="welcome-text">Welcome, <%= user.username || user.name %></span>
                        <% if (user.role === 'admin') { %>
                            <a href="/admin" class="btn btn-admin">Admin Panel</a>
                        <% } %>
                        <a href="/logout" class="btn btn-secondary">Logout</a>
                    <% } else { %>
                        <a href="/auth/login" class="btn btn-outline">Login</a>
                        <a href="/auth/register" class="btn btn-primary">Sign Up</a>
                    <% } %>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-content">
                <h1>Welcome to BookStore</h1>
                <p>Discover your next favorite book from our curated collection</p>
                <a href="#books" class="btn btn-large btn-primary">Browse Books</a>
            </div>
        </section>

        <!-- Books Section -->
        <section id="books" class="books-section">
            <div class="container">
                <h2>Featured Books</h2>
                
                <% if (books && books.length > 0) { %>
                    <div class="books-grid">
                        <% books.forEach(book => { %>
                            <div class="book-card">
                                <div class="book-image">
                                    <img src="<%= book.imageUrl || 'https://picsum.photos/seed/book-placeholder/200/300.jpg' %>" 
                                         alt="<%= book.title %>"
                                         onerror="this.src='https://picsum.photos/seed/default-book/200/300.jpg'">
                                </div>
                                <div class="book-info">
                                    <h3 class="book-title"><%= book.title %></h3>
                                    <p class="book-author">by <%= book.author %></p>
                                    <p class="book-price">$<%= book.price %></p>
                                    <p class="book-description"><%= book.description || 'A captivating book that will keep you turning pages.' %></p>
                                    <div class="book-actions">
                                        <button class="btn btn-primary btn-sm" onclick="addToCart('<%= book._id %>')">
                                            <i class="fas fa-shopping-cart"></i> Add to Cart
                                        </button>
                                        <a href="/book/<%= book._id %>" class="btn btn-outline btn-sm">View Details</a>
                                    </div>
                                </div>
                            </div>
                        <% }); %>
                    </div>

                    <!-- Pagination -->
                    <% if (pagination && pagination.totalPages > 1) { %>
                        <div class="pagination">
                            <% for (let i = 1; i <= pagination.totalPages; i++) { %>
                                <a href="?page=<%= i %>" class="pagination-link <%= pagination.currPage == i ? 'active' : '' %>">
                                    <%= i %>
                                </a>
                            <% } %>
                        </div>
                    <% } %>
                <% } else { %>
                    <div class="no-books">
                        <p>No books found. Please check back later!</p>
                    </div>
                <% } %>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>BookStore</h3>
                    <p>Your trusted online bookstore since 2024</p>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="/">Home</a></li>
                        <li><a href="#books">Books</a></li>
                        <li><a href="/auth/login">Login</a></li>
                        <li><a href="/auth/register">Sign Up</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Contact</h3>
                    <p>Email: info@bookstore.com</p>
                    <p>Phone: 1-800-BOOKS</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 BookStore. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        function addToCart(bookId) {
            // Simple add to cart animation for now
            const button = event.target.closest('button');
            const originalText = button.innerHTML;
            button.innerHTML = '<i class="fas fa-check"></i> Added!';
            button.classList.add('btn-success');
            
            setTimeout(() => {
                button.innerHTML = originalText;
                button.classList.remove('btn-success');
            }, 2000);
            
            // Here you would typically make an API call to add to cart
            console.log('Added to cart:', bookId);
        }

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });
    </script>
</body>
</html>